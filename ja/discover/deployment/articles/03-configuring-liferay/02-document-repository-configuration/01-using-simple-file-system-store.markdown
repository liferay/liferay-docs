---
header-id: using-the-simple-file-system-store-ja
---

# Simple File System Storeの使用

[TOC levels=1-4]

シンプルファイルストレージの実装はデフォルトのストアです。ファイルを保存するためにローカルフォルダを使用します。ファイルシステムをクラスタ化された設定に使用できますが、指定したフォルダはすべてのノードで共有され、同時要求とファイルロックを処理する必要があります。このため、ストレージエリアネットワークまたはクラスタ化されたファイルシステムを使用する必要があります。

ファイルシステムストアは最初に作成されたストアであり、@product@データベースに強くバインドされています。デフォルトでは、ドキュメントは`データ`フォルダの`document_library`サブフォルダに保存されています。もちろん、このパスはシステム設定で必要なものに変更できます。

| **注：**マルチノード環境でストア設定を伝播するには、システム設定内にあるストアの*ファイルストレージ*画面から、`.config`ファイルにストア設定をエクスポートします。そして、そのファイルを各ノードの`[Liferay-Home]/osgi/config`フォルダーにコピーします。設定をエクスポートするには、オプションアイコン![オプション](../../../images/icon-options.png)から*[エクスポート]*を選択します。

Simple File Systemストアは、ドキュメントを格納するためにこのフォルダパス形式を使用します。

    /companyId/folderId/numericFileEntryName/versionNumber

最初のフォルダ名はサイトの会社IDです。2番目のフォルダ名は、ドキュメントとメディアのフォルダのIDです。ここには、ドキュメントが存在します。3番目のフォルダ名は、ドキュメントのファイルエントリ番号です。最後に、4番目の名前はドキュメントの複数のバージョンを格納するために使用されるバージョン番号です。

| **注：**ドキュメントのファイルエントリ番号はドキュメントIDとは異なります。両者を混同しないでください。それぞれが独立したカウンターを持っています。ドキュメントを保管するためのフォルダパスにファイルエントリ番号が使用されていますが、ドキュメントIDには使用されていません。ファイルエントリ番号は、ポータルのデータベースの`DLFileEntry`の表の`名前`列にあります。 ドキュメントIDは、同じ表の`fileEntryId`列にあります。

| **警告：**データベーストランザクションのロールバックがドキュメントライブラリで発生した場合、トランザクションの開始以降に発生したファイルシステムの変更は元に戻されません。ドキュメントライブラリファイルとファイルシステムストア内のファイルとの間に矛盾が生じる可能性があり、手動での同期が必要になる場合があります。

Simple File System Storeはドキュメントを@product@に非常に密接にバインドするので、必要ではないかもしれません。デフォルト設定をしばらく使用していて、かつドキュメントを移行する必要がある場合は、コントロールパネルの*[サーバ管理]* → *[データ移行]*に移行ユーティリティがあります。このユーティリティは、ドキュメントをあるストアの実装から別のストアの実装へと移動しやすくします。
