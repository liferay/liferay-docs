---
header-id: using-audit-events
---

# 監査イベントの表示

<p class="alert alert-info"><span class="wysiwyg-color-blue120">ファストトラック記事は、お客様の利便性のために一部機械翻訳されています。また、ドキュメントは頻繁に更新が加えられており、翻訳は未完成の部分が含まれることをご了承ください。最新情報は都度公開されておりますため、必ず英語版をご参照ください。翻訳に問題がある場合は、<a href="mailto:support-content-jp@liferay.com">こちら</a>までご連絡ください。</span></p>

[TOC levels=1-4]

監査アプリには、@product@インストールのアクティビティが表示されます。 *Control Panel* → *Configuration* → *Audit*移動してアクセスします。 アプリは、キャプチャされたイベントの検索可能なリストを表示します。 リストを閲覧することもできますが、通常は検索の方が高速です。

この図は、John Watsonがログインし、サイトでいくつかのアクションを実行したことを示しています。 エントリをクリックすると、これらのイベントの詳細が表示されます。

![図1：監査アプリは、キャプチャしたイベントを検索可能なリストに表示します。](../../../images-dxp/audit-list-events.png)

![図2：リスト内のイベントをクリックして、詳細を表示します。 このイベントの詳細は、ジョンワトソンがユーザーアカウントの <code>prefixId</code> を <code>1</code> から <code>4</code>更新したことを示しています。 <code>prefixId</code> は、Dr.、Mr.、Mrs。、またはMsのような名前のプレフィックスを表します。](../../../images-dxp/audit-detail.png)

ご覧のように、所有しているユーザーの数によっては、このリストはすぐに入力されます。 そのため、ページビューイベントはデフォルトでは表示されません。 間違いなく最も頻繁に発生するイベントであるため、監査レポートが乱雑になります。

| **注：** 監査レポートにページビューイベントを追加できますが、次の**注意してください。そうすると、たくさんのイベントが追加されます。 あなたがこの種の大食いなら|罰、このプロパティを `portal-ext.properties` ファイルに追加します` | audit.message.com.liferay.portal.kernel.model.Layout.VIEW = true | | @product@のコードは、ページを <em x-id="3">レイアウト</em>として参照します。 このプロパティを <code>設定true` |したがって、ページビューの監査イベントを記録します。 デフォルトではオフになっています|これは、ほとんどのインストールでは細かすぎるためです。 | |プロパティを追加したら、サーバーを再起動します。</p>

## 監査イベントの検索[](id=finding-audit-events)

イベントの大きなリストから必要なものを見つけるのは、干し草の山から針を探すようなものです。 これが、Auditアプリに強力な検索メカニズムがある理由です。 デフォルトでは、見た目は非常に単純です。検索フィールドは1つだけです。 ただし、検索バーの横にある *拡大鏡* アイコンをクリックすると、検索で使用できるさまざまなフィールドで分割された詳細検索ダイアログが表示されます。

利用可能な検索オプションは次のとおりです。

**一致：** 指定した *すべての* のフィールド、または *つの* つの単一フィールドの一致を検索します。

**ユーザーID：** 検索するユーザーID。 これは通常、監査するアクションを実行したユーザーです。

**ユーザー名：** 検索するユーザー名。 これは、特にユーザーIDを含むデータベースにアクセスできない場合は、ユーザーIDを検索するよりも簡単です。

**リソースID：** この監査レコードで変更または表示されたリソースのID。

**クラス名：** この監査レコードで変更または表示されたリソースの名前。 たとえば、ユーザーリソースを検索して、誰かがユーザーのアカウントを変更したかどうかを確認できます。

**リソースアクション：** リソースで実行されたアクション。 これは、これらのいずれであってもよい： `追加`、 `アサイン`、 `削除`、 `偽装`、 `ログイン`、 `login_failure`、 `ログアウト`、 `割り当て解除`、又は `更新`。

**セッションID：** 検索するセッションID。 これを使用して、WebサーバーログのセッションIDを@product@のアクティビティと関連付けることができます。

**クライアントIP：** 監査するアクティビティを実行したクライアントのIPアドレス。

**クライアントホスト：** 監査するアクティビティを実行したクライアントのホスト名。

**サーバー名：** アクティビティが発生したサーバーの名前。 クラスターを使用している場合、クラスターの各メンバーを個別にクエリできます。

**サーバーポート：** アクティビティが発生したサーバーポート。 同じマシン上で複数のVMの垂直クラスターを実行する場合、これが必要です。

**開始日：** 検索する日付範囲の下限。

**終了日：** 検索する日付範囲の上限。

たとえば、誰かが特定のロールからユーザーの割り当てを解除したかどうかを確認するには、リソース名 *user* とリソースアクション *unassign*検索します。 検索結果を取得したら、返されたレコードのいずれかをクリックして、そのレコードの詳細ページを表示できます。

![図3：Auditアプリの高度な検索フォームを使用すると、監査イベントを簡単に検索できます。 さまざまな検索基準を指定して、必要なイベントのタイプを見つけることができます。](../../../images-dxp/audit-unassign-search.png)

![図4：このレコードは、デフォルトの管理ユーザーがユーザーテストテストからパワーユーザーの役割を削除したことを示しています。](../../../images-dxp/audit-unassign-detail.png)

ご覧のように、監査アプリは、ユーザーが変更を加えたときに何が起こっているかを示します。 この情報を使用して、問題のトラブルシューティングを行ったり、特定のアクションの所有権を確認したり、またはハリー（序論のストーリーから）がやろうとしていることにより、想定されていなかった権限の変更を誰が行ったかを調べたりします。
