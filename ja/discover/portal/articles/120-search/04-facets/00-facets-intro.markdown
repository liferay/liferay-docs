---
header-id: facets
---

# ファセット

<p class="alert alert-info"><span class="wysiwyg-color-blue120">ファストトラック記事は、お客様の利便性のために一部機械翻訳されています。また、ドキュメントは頻繁に更新が加えられており、翻訳は未完成の部分が含まれることをご了承ください。最新情報は都度公開されておりますため、必ず英語版をご参照ください。翻訳に問題がある場合は、<a href="mailto:support-content-jp@liferay.com">こちら</a>までご連絡ください。</span></p>

[TOC levels=1-4]

検索バーにキーワードを入力し、検索ボタン（![Search](../../../images/icon-search.png)）をクリックします。 デフォルトの検索エクスペリエンスは、右側に結果があり、左側に *ファセット* コレクションがあるページにリダイレクトします。

![図1：* Site *と* Type *は、遭遇する2つのファセットセットです。](../../../images/search-faceted-search.png)

ファセットは、いくつかの共通の特性によって検索結果を集約し、各ファセットは共通のものを共有する検索結果を保持します。 結果の全リストをスキャンした後、ユーザーは1つのファセットからの結果（たとえば、特定のサイトからのすべての結果、またはブログエントリであるすべての結果）の方が適切であると判断する場合があります。 では、どのファセットがデフォルトで含まれていますか？

  - **サイトファセット** サイトで結果をフィルタリングします。
  - **アセットタイプで結果をフィルタリングするには、タイプファセット** を入力します。
  - **タグファセット** タグで結果をフィルタリングします。
  - **カテゴリファセット** カテゴリで結果をフィルタリングします。
  - **フォルダファセット** 結果をフォルダでフィルタリングします。
  - **コンテンツ作成者による結果のフィルタリング用のユーザーファセット**。
  - **最終変更日で結果をフィルタリングするための変更ファセット**。
  - **カスタムファセット** 他のインデックスフィールドで結果をフィルタリングします。 参照してください [ここでは](/docs/7-1/user/-/knowledge_base/u/custom-facet) より多くの情報のために。

（チェックボックスを使用して選択された）ファセットの各アイテムは、 *ファセットターム* （略して*ターム* ）と呼ばれます。

このチュートリアルでは、ファセットとその用語の使用方法、およびファセットの構成を見つける方法について説明します。 残りの記事は、各ファセットで使用可能な構成を示しています。

## ファセットの使用

あなたが実際に熟練したオーボエ奏者でない場合は、少しふりをしてください。 あなたはクラシックミュージシャンのサイトにアクセスしています。 Johann Bachの作曲の優れたテクニカル分析を読んだことを覚えていますが、ブックマークするのを忘れていました（または、 *マーク*でしょうか？）。 キーワード *bach* を検索バーに入力すると、ヨハンバッハは非常に重要で有名な作曲家だったため、多くの結果が得られました。 最初はお勧めしませんが、サイトの優れた技術的コンテンツのほとんどを作成するサイトメンバーがいて、名前が *back2bach*であることを覚えています。 彼の名前がUserファセットにリストされており、ファセット数（ファセットの横の括弧内の数）に結果があまりないことがわかります。 ファセットをクリックして、必要なコンテンツをすばやく見つけます。

![図2：多くの検索結果が表示された場合、ファセットは結果リストを絞り込み、ユーザーが関連するコンテンツを見つけられるようにします。](../../../images/search-facets1.png)

ファセットをクリックすると、検索結果が絞り込まれます。 検索クエリのフィルターリストに追加され、選択したファセットによって結果リストが絞り込まれます。

![図3：Asset Typesファセットで* Web Content Article *タイプをクリックすると、リストされるのはそれだけです。](../../../images/search-facet-wc.png).

## 複数のファセットの選択

1つのファセット内のファセット用語の選択は追加されます。 同じファセット内のより多くの用語をクリックすると、検索結果が拡張されます *Term-1* OR *Term-2*、ORなどに一致する結果を表示したいかのように処理されるためです。 ファセットからすべての用語選択を削除するには、[ *クリア* リンクをクリックします。

![図4：ファセットの用語は、同じファセットに適用すると追加されます。 キーワードに一致するブログエントリまたはWebコンテンツの記事がここに表示されます。](../../../images/search-multiple-terms.png)

異なるファセットからのファセット用語の選択は排他的です。 複数のファセットからファセット用語をクリックすると、 *ファセット-1* AND *ファセット-2*、ANDなどに一致する結果を表示するように処理されるため、結果が絞り込まれます。 これは直感的です。 ファセット

![図5：異なるファセットから選択されたファセット用語は排他的です。 これらの結果は、ブログエントリタイプで、かつユーザーMarvin Smartからのものである必要があります。](../../../images/search-multiple-facets.png)

タイプファセットで2つの用語を選択する場合（ブログエントリとWebコンテンツ記事）、およびユーザーファセットで2つの用語を選択する場合（ジェームズジェフリーズとマービンスマート）について考えます。 どのような結果が表示されますか？

*ブログエントリまたはWebコンテンツの記事であり、James Jeffriesによって作成されたOR Marvin Smart*。

MarvinとJamesがそれぞれ4つのコンテンツ（2つのブログと2つのWebコンテンツ記事）を作成した場合、8つすべてが検索結果に表示されます。 他のユーザーが作成したブログやWebコンテンツは表示されず、MarvinとJamesが作成した他のタイプのアセットは表示されません。 他のユーザーが作成したブログエントリやWebコンテンツ記事ではないコンテンツは、明らかに検索されません。

![図6：面内と面間の両方の選択が可能です。](../../../images/search-facet-selections.png)

| **注：** 新しい検索ファセットウィジェットは、ファセットの複数選択をサポートしています。条項。 従来の検索ポートレットでは、複数のファセットの選択はサポートされていません。

## ファセットとわかりやすいURL

従来のモノリシック検索ポートレットでは、次のようなURLは珍しくありませんでした。

    http://localhost:8080/web/guest/home?_com_liferay_portal_search_web_portlet_SearchPortlet_formDate=1529671834606&p_p_id=com_liferay_portal_search_web_portlet_SearchPortlet&p_p_lifecycle=0&p_p_state=maximized&p_p_mode=view&_com_liferay_portal_search_web_portlet_SearchPortlet_mvcPath=%2Fsearch.jsp&_com_liferay_portal_search_web_portlet_SearchPortlet_redirect=http%3A%2F%2Flocalhost%3A7011%2Fweb%2Fguest%2Fhome%3Fp_p_id%3Dcom_liferay_portal_search_web_portlet_SearchPortlet%26p_p_lifecycle%3D0%26p_p_state%3Dnormal%26p_p_mode%3Dview&_com_liferay_portal_search_web_portlet_SearchPortlet_keywords=test&_com_liferay_portal_search_web_portlet_SearchPortlet_scope=this-site

新しい検索機能は、ファセットフィルタリングにわかりやすい検索URLを使用します。 デフォルト設定の場合、キーワード *test*検索するときのデフォルトのメイン検索URLは次のとおりです。

    http://localhost:8080/web/guest/search?q=test

ファセット用語を選択すると、上記のURLに新しいパラメーターが作成されます。 たとえば、Typeファセットから *Blogs Entry* 選択すると、次のURLになります。

    http://localhost:8080/web/guest/search?q=test&type=com.liferay.blogs.model.BlogsEntry

同じファセットカテゴリから別のファセット用語を選択すると、同じパラメーターが再度追加されますが、新しく選択された値が使用されます。

    http://localhost:8080/web/guest/search?q=test&type=com.liferay.blogs.model.BlogsEntry&type=com.liferay.portal.kernel.model.User

残りのファセットも同じように機能します。 最終変更ファセットポートレットの[過去1時間]オプションでフィルタリングすると、次のURLが生成されます。

    http://localhost:8080/web/guest/search?q=test&modified=past-hour

パラメータ名は、ファセットごとに構成可能です。

ファセットの仕組みを理解したところで、含まれている各ファセットの構成について読んでください。
