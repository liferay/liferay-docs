---
header-id: managing-workflows
---

# ワークフローの管理

<p class="alert alert-info"><span class="wysiwyg-color-blue120">ファストトラック記事は、お客様の利便性のために一部機械翻訳されています。また、ドキュメントは頻繁に更新が加えられており、翻訳は未完成の部分が含まれることをご了承ください。最新情報は都度公開されておりますため、必ず英語版をご参照ください。翻訳に問題がある場合は、<a href="mailto:support-content-jp@liferay.com">こちら</a>までご連絡ください。</span></p>

[TOC levels=1-4]

他のリソースと同様に、ワークフロー定義は追加、編集、および削除できます。 しかし、それはワークフロー管理の始まりにすぎません。

  - ワークフロー定義は進行中の複雑な作業になる可能性があるため、バージョン管理を行うことができます。

  - 未公開の下書きを保存できます。

  - ワークフロー定義はXMLファイルであるため、移植可能です。 したがって、それらもアップロードできます。

ワークフロー定義を編集および公開するための権限について学習することから始めます。

## ワークフロー定義の公開権限

ワークフロー定義を編集または公開する権限を持つユーザーは、ワークフローに [Groovyスクリプト](/docs/7-1/user/-/knowledge_base/u/leveraging-the-script-engine-in-workflow) を追加できます。 スクリプトエンジンへのアクセスとは、サーバーのJava仮想マシン（JVM）へのアクセスを意味します。 したがって、スクリプトを含むワークフロー定義を公開（または編集）するユーザーは、@product@自体の個別の [仮想インスタンス](/docs/7-1/user/-/knowledge_base/u/virtual-instances) に含まれるデータなど、JVMの到達範囲内の任意のデータにアクセスできます。

この広範囲にわたるアクセスのため、ワークフロー定義を作成または編集する権限は、デフォルトの仮想インスタンスの通常の管理者に制限されています。 Liferay DXPのお客様の場合、Kaleo DesignerおよびKaleo Forms Adminアプリケーションにアクセスできるサイト管理者もワークフローを編集および公開できます。

これらのロールを持つユーザーに追加の仮想インスタンスでのワークフローパブリケーションアクセスを許可するには、

1.  これらの管理者に付与するアクセス権を必ず理解してください。
2.  コントロールパネル→システム設定→ワークフロー→ワークフロー定義に移動します。
3.  設定のボックスにチェックを入れ *管理者が公開を許可し、編集ワークフロー*。

これは、システムに追加された仮想インスタンスにのみ適用されます。 デフォルトの仮想インスタンスは、通常の管理者（コントロールパネル→構成→ワークフロー）へのワークフローパブリケーションアクセスを提供し、Liferay DXPを実行している場合は、サイト管理者およびKaleo DesignerおよびKaleo Forms Adminアプリケーションへのアクセス権を持つ他のユーザーにワークフローパブリケーションアクセスを提供します。

## 追加、編集、削除

ワークフロー定義を追加するには、

1.  [コントロールパネル]→[構成]→[ワークフロー]に移動します。

2.  デフォルトビュー（ワークフロー）で、[追加]ボタン（![Add](../../images/icon-add.png)）をクリックします。

3.  ここからは、どちらかだ [XML定義の書き込み](/docs/7-1/tutorials/-/knowledge_base/t/crafting-xml-workflow-definitions)、 [KALEO Designerの定義を設計する（DXPのみ）](https://customer.liferay.com/documentation/7.1/admin/-/official_documentation/portal/kaleo-designer)、または [既存の定義アップロード](#uploading-workflow-definitions)。

定義を編集するには、

1.  [コントロールパネル]→[構成]→[ワークフロー]に移動します。

2.  ワークフローの *Actions* ボタン（![Actions](../../images/icon-actions.png)）をクリックし、 *Edit*をクリックします。

定義を削除するには、

1.  [コントロールパネル]→[構成]→[ワークフロー]に移動します。

2.  ワークフローの[ *アクション* ]ボタン（![Actions](../../images/icon-actions.png)）をクリックし、[ *非公開*]をクリックします。

    公開されたワークフローは削除できないため、最初にワークフロー定義を非公開にする必要があります。

    アセットに対してアクティブ化されている場合、定義を非公開にすることはできません。 最初に、ワークフロー定義を、それを使用するアセットから分離します。 参照してください [ここでは](/docs/7-1/user/-/knowledge_base/u/activating-workflow) より多くの情報のために。

## ワークフロー定義のアップロード

ローカルXML定義ファイルがある場合（おそらく、 [埋め込みワークフロー](/docs/7-1/user/-/knowledge_base/u/workflow#embedded-workflows)基づいて新しいワークフローを作成したい場合）、それを@product@にアップロードします。

1.  [コントロールパネル]→[構成]→[ワークフロー]に移動します。

2.  [ *追加* ]ボタン（![Add](../../images/icon-add.png)）をクリックします。

3.  ワークフローに名前を付けます。次に、リンクをクリックして *ファイルをインポートします*。

4.  XMLファイルを見つけてアップロードします。 アップロードすると、定義のXMLがワークフローエディターに表示されます。

5.  公開する準備ができたら、[ *公開*]をクリックします。 それ以外の場合、 ** 保存し、非公開のままになります。

Liferay DXPのお客様は、デフォルトで [Kaleo Designer](https://customer.liferay.com/documentation/7.1/admin/-/official_documentation/portal/kaleo-designer) を使用してワークフローを作成します。 Kaleo Designerで既存のXMLファイルをアップロードするには、

1.  [コントロールパネル]→[構成]→[ワークフロー]に移動します。

2.  [ *追加* ]ボタン（![Add](../../images/icon-add.png)）をクリックします。

    Kaleo Designerパレットが表示されます。

3.  *Source* タブをクリックします。

4.  ハイパーリンクをクリックします *文のファイル* をインポートします

    `Write your definition or import a file`

5.  XMLファイルを見つけてアップロードします。 アップロードすると、定義のXMLがワークフローエディターに表示されます。

6.  Kaleo Designerのドラッグアンドドロップインターフェイスを使用して編集するには、[ *図* ]タブをクリックします。

7.  公開する準備ができたら、[ *公開*]をクリックします。 それ以外の場合、 ** 保存し、非公開のままになります。

保存と公開の違いは何ですか？

## 公開済みと未公開の比較

公開済みワークフローと非公開ワークフローの違いは重要です。

**公開済み：** 検証が完了し、ワークフローをアセットに割り当てることができます。

**非公開：** 検証は非公開ワークフローでは実行されず、公開されるまでアセットに割り当てることはできません。

## ワークフローのバージョン

上司とのミーティングがあることを突然思い出したときに、ワークフローを簡単に編集しています。 すぐにワークフローを保存して、急いで会議に出かけます。 おめでとう\！ ビジネス生産性担当ディレクターに昇進しました\！ ここでワークフローを編集する時間がないため、同僚はワークフローの編集と公開を完了する必要があります。 残念ながら、プロモーションの興奮のなかで、ワークフローで変更した内容を忘れてしまいました。 以前のバージョンに戻し、最初から編集を開始することをお勧めします。

1.  ワークフローエディターを開きます。 *コントロールパネル* → *構成* → *ワークフロー*に移動し、リストからワークフローを選択します。

2.  情報パネルを開きます。 [ *情報* ]ボタンをクリックします（![Information](../../images/icon-information.png)）

3.  情報パネルには、詳細と改訂履歴の2つのセクションがあります。

    [詳細]画面には、ワークフローの作成とその最終変更に関する情報、および変更全体の概要が表示されます。

    [改訂履歴]画面には、ワークフローの現在および以前の復元可能なバージョンが表示されます。 古いワークフローを表示するか、正しいバージョンであると確信している場合に復元するには、[ *アクション* ]ボタン（![Actions](../../images/icon-actions.png)）をクリックし、[ *プレビュー* ]または[ *復元*]を選択します。

4.  [ *復元* ]をクリックして成功メッセージが表示された場合、以前のバージョンはワークフローの現在のバージョンです。 これで、復元されたバージョンのワークフローを編集できます。

5.  編集が必要な場合は、編集して *Update*をクリックします。 これにより、ワークフローの別のバージョンが作成されます。

![図1：ワークフローの以前のバージョンの表示と復元。](../../images/workflow-revisions.png)

または、 [定義](/docs/7-1/user/-/knowledge_base/u/workflow#embedded-workflows) を参照して、ワークフロー定義のアイデアを得ることができます。
