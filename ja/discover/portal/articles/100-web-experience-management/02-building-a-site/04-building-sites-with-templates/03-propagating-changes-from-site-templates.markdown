---
header-id: propagating-changes-from-site-templates-to-sites
---

# サイトテンプレートからサイトへの変更の伝達

<p class="alert alert-info"><span class="wysiwyg-color-blue120">ファストトラック記事は、お客様の利便性のために一部機械翻訳されています。また、ドキュメントは頻繁に更新が加えられており、翻訳は未完成の部分が含まれることをご了承ください。最新情報は都度公開されておりますため、必ず英語版をご参照ください。翻訳に問題がある場合は、<a href="mailto:support-content-jp@liferay.com">こちら</a>までご連絡ください。</span></p>

[TOC levels=1-4]

サイトテンプレート管理者は、サイトテンプレートページを追加、更新、または削除できます。 サイトテンプレートに加えられた変更は、ページセットがサイトテンプレートにリンクされているサイトに伝達できます。 あなたがサイトテンプレートに基づいてサイトを作成すると *サイトテンプレートからの変更の伝播の有効化* ボックスは、このリンクが作成された確認を。 変更の伝播を構成するには：

1.  [ *Site Selector* ]ボタン（![Compass](../../../../images/icon-compass.png)）を選択して、メニューの[Sites]ドロップダウンからサイトを選択します。

2.  [ *構成* ]→[ *サイト設定* ]ページに移動し、[ *サイトテンプレートからの変更の伝播を有効にする* チェックボックスをオフまたは再度オンにします。

このセクションでは、サイトテンプレートからサイトへの変更の伝達について学習し、サイト管理者とサイトテンプレート管理者が使用できるオプションについて説明します。

## サイトテンプレートページの動作

サイトのページセットがサイトテンプレートから作成されていて、サイトテンプレートからの変更の伝達が有効になっている場合、サイト管理者は新しいページを追加できますが、サイトテンプレートからインポートされたページを削除または並べ替えることはできません。 サイトにサイトテンプレートからインポートされたページとカスタムサイトページの両方がある場合、サイトテンプレートページは常にサイトページ階層の最初に表示されます。サイト管理者が追加したカスタムページは、サイトテンプレートページの後に表示されます。 サイトテンプレートの管理者だけが、サイトテンプレートページを削除、並べ替え、または追加できます。 サイト管理者は、カスタムサイトページを追加または削除できます。 また、サイトテンプレートページの後に配置されている限り、カスタムサイトページを並べ替えることもできます。 サイトテンプレート管理者は、カスタムサイトページを追加、削除、または並べ替えることはできません。

| **注：** フラグメントを含むページ（例| [コンテンツページ](/docs/7-1/user/-/knowledge_base/u/using-page-fragments)）|することはできません変更の伝播サイトがある後 *最初の* サイトをもとに作成しました|テンプレート。

サイト管理者がサイトテンプレートからインポートされたページを変更してページを更新すると、コントロールメニューに次の情報アイコン（![Information](../../../../images/icon-control-menu-information.png)）が表示され、次のメッセージが表示されます。

    This page has been changed since the last update from the Site template. No
    further updates from the Site template will be applied.

![図1：情報アイコンをクリックして、サイトテンプレートに関する重要な情報を表示できます。](../../../../images/site-template-update-message.png)

## 変更のマージとリセット

サイト管理者が[ *変更をリセット* ]ボタンをクリックすると、変更はサイトテンプレートページから、サイトテンプレートからインポートされた対応するサイトページに反映されます。 [ *変更のリセット* ]ボタンをクリックすると、ページに2種類の更新が行われます。 まず、サイト管理者がサイトページに加えた変更が取り消されます。 次に、サイトテンプレート管理者がサイトテンプレートページに加えた変更が、サイトページに適用されます。 注：[ *変更をリセット* ]ボタンをクリックしても、1ページのみがリセットされます。 複数のサイトページが変更されていて、それらにサイトテンプレートページを再適用する場合は、各ページの[ *変更をリセット* ]ボタンをクリックする必要があります。

サイトテンプレート管理者は、サイトテンプレートページでアプリの設定を行うことができます。 Liferay管理者がサイトテンプレートからサイトを作成すると、アプリ設定がサイトテンプレートのアプリからコピーされ、デフォルトのアプリ設定が上書きされます。 サイトテンプレートとサイトの変更をマージするとき（リセット時など）、アプリの設定はサイトテンプレートアプリからサイトアプリにコピーされます。 IDを参照しないグローバルアプリ設定またはローカルアプリ設定のみが上書きされます。

場合によっては、サイトテンプレートとサイト変更のマージが失敗します。 たとえば、わかりやすいURLが競合しているためにサイトテンプレートのページを伝達できない場合、@product@はサイトの変更を継続的にマージしようとする可能性があります。 マージの無限ループに入るのに失敗する代わりに、@product@は数回の試行が失敗した後にマージを停止します。 ただし、@product@はそこで止まりません。マージは一時的に一時停止され、現在のマージが失敗したことを示すメッセージが表示され、マージの競合を修正する機会が与えられます。 競合を解消した後、サイトの *サイト管理* → *構成* → *サイト設定* に移動し、 *[リセットして伝播* ]ボタンをクリックします。

![図2：この種類の警告は、サイトテンプレートページとのURLの競合が発生した場合に表示されます。](../../../../images/friendly-url-propagation-failure.png)

[ *リセットして伝播* ]ボタンは、マージ失敗カウントをリセットし、サイトの変更を再度伝播しようとします。 このプロセスにより、問題が発生したときにマージの失敗を検出して修正する機会が得られます。 この便利なプロセスは、ページテンプレートのマージでも実行できます。これは、同様の手順に従います。

サイト管理者は、サイトテンプレートアプリケーションにデータを追加することもできます。 たとえば、サイトテンプレートの管理者は、Wikiアプリをサイトテンプレートページに追加し、Wikiを使用して多くの記事を作成できます。 Liferay管理者がサイトテンプレートからサイトを作成すると、サイトテンプレートのアプリからサイトのアプリにデータがコピーされます。 サイトのアプリの設定は、コピーされたデータのIDで更新されます。 たとえば、多くのWiki記事を含むWikiアプリを含むサイトテンプレートからサイトが作成された場合、Wiki記事はサイトテンプレートのスコープからサイトのスコープにコピーされ、サイトのWikiアプリはコピーされたIDで更新されますウィキの記事。

| **重要：** アプリデータ、フラグメントベースのページ、関連リソース、|リソースに対する権限は、次の場合にのみサイトテンプレートからサイトにコピーされます。サイトはその *最初の* テンプレートに基づいて作成されました。 これらに変更はありません|エンティティは、サイトの作成後にサイトに伝達されます。 どちらでもない|このような変更は、 *リセット* または *リセットおよび伝播* |によってサイトに伝播されました。特徴。

たとえば、サイトテンプレートの一部として掲示板アプリを含めるサイトテンプレート管理者について考えてみます。 メッセージボードのカテゴリを作成し、カテゴリのアクションに対する権限を構成します。 サイトテンプレートに基づいてサイトが初めて作成されるときに、カテゴリ（アプリデータ）と関連する権限がサイトにコピーされます。 サイトテンプレート管理者は、追加、削除、またはいくつかのカテゴリを削除した場合は、しかし、そのような変更 *ありません* サイトに伝播が。

サイトテンプレートの仕組みを学習したので、サイトテンプレートを共有する方法を学習します。
