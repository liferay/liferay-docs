# @product@インストールのバックアップ[](id=backing-up-a-liferay-installation)

@product@のインストールを実行したら、包括的なバックアップ計画を実施する必要があります。壊滅的なハードウェア障害が発生した場合に、@product@を復元するためのバックアップと手順があると役立ちます。@product@は、アプリケーションサーバー上で実行されている可能性がある他のJava Webアプリケーションとそれほど変わりはありません。しかし、バックアップ計画に含めるべき特定のコンポーネントがいくつかあります。

推奨されるバックアップ計画には、以下のバックアップが含まれています。

- ソースコード
- @product@のファイルシステム
- @product@のデータベース

## ソースコードのバックアップ[](id=backing-up-source-code)

@product@を拡張したり、プラグインを書いたりした場合は、Linus Torvaldsでない限り、Git、Subversion、またはCVSなどのソースコードリポジトリに保存する必要があります。進行中の作業を保存するために、ソースコードリポジトリを定期的にバックアップする必要があります。何ヶ月もかけて作成したソースコードを失わないようにするためです。したがって、@product@バックアップ計画にソースコードを含める必要があります。

次に、バックアップする必要がある@product@のインストール項目について説明します。

## @product@のファイルシステムのバックアップ[](id=backing-up-liferays-file-system)

[Liferay Homeフォルダ](/discover/deployment/-/knowledge_base/7-1/installing-liferay#liferay-home)には、`portal-setup-wizard.properties`や`portal-ext.properties`など、@product@のプロパティ設定ファイルが保存されています。これらのファイルは必ずバックアップを取ってください。実際には、アプリケーションサーバー全体とLiferay Homeフォルダの内容をバックアップするのが最善です。

@product@は、設定ファイル、検索インデックス、およびキャッシュ情報をLiferay Homeの`/data`フォルダに格納します。ファイルシステムストアまたはAdvanced File System storeを使用している場合は、ドキュメントとメディアリポジトリもデフォルトでここに保存されます。`/data`フォルダのバックアップを取っておくことは、常に重要です。

@product@のOSGiランタイムを構成するファイルは、Liferay Homeの`/osgi`フォルダに格納されてい ます。ここには、@product@にデプロイされたすべてのアプリおよびモジュールのJARファイルが含まれています。この`/osgi`フォルダには、その他の必要なJARファイル、設定ファイル、およびログファイルも含まれています。そのため、`/osgi`フォルダのバックアップを取っておくことも重要です。

Liferay Homeの`/logs`フォルダには、@product@のログファイルが含まれています。@product@に問題が発生した場合、@product@ログファイルには、問題の原因を特定するための貴重な情報が含まれています。`/data`、`/osgi`、および`/logs`フォルダは、すべてのLiferay Homeフォルダに含まれています。したがって、アプリケーションサーバーフォルダとLiferay Homeフォルダの両方をバックアップしていれば、問題はありません。

デフォルトの場所ではない場所にファイルを保存するようにドキュメントライブラリを設定した場合は、その場所もバックアップする必要があります。

そうすることで、バックアップすべき@product@ファイルシステムの場所がカバーされます。次に、@product@のデータベースをバックアップする方法について説明します。

## @product@データベースのバックアップ[](id=backing-up-liferays-database)

@product@のデータベースは、ポータルにあるすべての情報の中央リポジトリです。バックアップが最も重要な部分です。データベースのバックアップは、ライブバックアップ（データベースで許可されている場合）か、データベースをファイルにエクスポート（ダンプ）してからエクスポートされたファイルをバックアップすることでできます。たとえば、MySQLにはデータベース全体とデータを大きなSQLファイルにエクスポートできる`mysqldump`ユーティリティが付属しています。このファイルはバックアップすることができます。データベースを復元する際に、このファイルをデータベースにインポートして、データベースをエクスポートした時点の状態を再び作成することができます。

@product@のドキュメントとメディアライブラリのファイルをJackrabbit JSR-170リポジトリデータベースに保存している場合は、バックアップする必要があります。検索インデックスをデータベースに配置した場合（お勧めしません 。Cluster LinkまたはSolrの使用方法については、[@product@クラスタリング](/discover/deployment/-/knowledge_base/7-1/liferay-clustering)の記事を参照、そのデータベースもバックアップする必要があります。

データベースを復元した後にコンテンツのインデックスを再び作成したくない場合は、検索インデックスをバックアップしてください。これは、インデックスが保存されているElasticまたはSolr環境が別にある場合に最も簡単な方法です。クラスタ化された設定で、インデックスを複製している場合は、各インデックスレプリカをバックアップする必要があります。

アプリケーションサーバー、Liferay Homeフォルダ、ファイルシステムベースのメディアリポジトリの場所、およびバックアップシステムからデータベースを復元すると、ポータルが機能するはずです。検索インデックスを復元することで、壊滅的な障害の発生後にサイトを回復したときにインデックスを再作成する必要がなくなります。
ハードウェア障害から正常に復元するには、一貫性のあるバックアップ手順が重要になります。
